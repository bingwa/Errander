{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Errand\\\\frontend\\\\src\\\\pages\\\\UserDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Button, Container, Spinner, Alert, Card, Modal, Form } from 'react-bootstrap';\nimport taskService from '../services/taskService';\nimport AuthContext from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StarRating = ({\n  rating,\n  setRating\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"my-3 text-center\",\n  children: [...Array(5)].map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: i < rating ? \"btn text-warning\" : \"btn text-secondary\",\n    style: {\n      background: 'none',\n      border: 'none',\n      fontSize: '2.5rem',\n      padding: '0 5px',\n      boxShadow: 'none'\n    },\n    onClick: () => setRating(i + 1),\n    children: \"\\u2605\"\n  }, i, false, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 112\n  }, this))\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 49\n}, this);\n_c = StarRating;\nconst UserDashboard = () => {\n  _s();\n  var _selectedTask$errande;\n  const {\n    token\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedTask, setSelectedTask] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [feedback, setFeedback] = useState('');\n  const fetchTasks = useCallback(async () => {\n    if (!token) return;\n    try {\n      const res = await taskService.getUserTasks(token);\n      setTasks(res.data);\n    } catch (e) {\n      setError(\"Failed to fetch task history.\");\n    } finally {\n      setLoading(false);\n    }\n  }, [token]);\n  useEffect(() => {\n    fetchTasks();\n  }, [fetchTasks]);\n  const handleCheckout = task => navigate(`/checkout/${task._id}`);\n  const handleShowRatingModal = task => {\n    setSelectedTask(task);\n    setShowModal(true);\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setRating(0);\n    setFeedback('');\n    setSelectedTask(null);\n  };\n  const handleRatingSubmit = async () => {\n    if (rating === 0) return;\n    try {\n      await taskService.rateTask(selectedTask._id, {\n        rating,\n        feedback\n      }, token);\n      fetchTasks();\n      handleCloseModal();\n    } catch (e) {\n      alert('Failed to submit rating.');\n    }\n  };\n\n  // --- NEW FUNCTION TO HANDLE CANCELLATION ---\n  const handleCancelTask = async taskId => {\n    if (window.confirm('Are you sure you want to cancel this pending task?')) {\n      try {\n        const res = await taskService.cancelTask(taskId, token);\n        // Update the task in the list to show it's cancelled\n        setTasks(tasks.map(t => t._id === taskId ? res.data.task : t));\n      } catch (err) {\n        alert('Failed to cancel the task. It may have already been accepted.');\n      }\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"text-center mt-5\",\n    children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 65\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"display-5 fw-bold\",\n        children: \"Your Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 47\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lead text-muted\",\n        children: \"Book a new service or review your past errands.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 100\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/services\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          size: \"lg\",\n          style: {\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            border: 'none'\n          },\n          children: \"Book a New Service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 203\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 182\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-3\",\n      children: \"Your Task History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 23\n    }, this), tasks.length === 0 && !error ? /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"light\",\n      children: \"You have no tasks yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 45\n    }, this) : tasks.map(task => /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-3 shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-center flex-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: [\"Task ID: ...\", task._id.slice(-6)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n              className: \"mb-2 text-muted\",\n              children: [\"Errander: \", task.errander ? `${task.errander.firstName} ${task.errander.lastName}` : 'Not Assigned']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 44\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-capitalize fw-bold\",\n                children: task.status.replace('_', ' ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 69\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 mt-md-0\",\n            children: [task.status === 'pending' && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-danger\",\n              size: \"sm\",\n              onClick: () => handleCancelTask(task._id),\n              children: \"Cancel Task\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 37\n            }, this), task.status === 'completed' && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\",\n              onClick: () => handleCheckout(task),\n              children: \"Proceed to Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 65\n            }, this), task.status === 'paid' && !task.rating && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"warning\",\n              onClick: () => handleShowRatingModal(task),\n              children: \"Rate Task\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 76\n            }, this), task.rating > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-warning fw-bold\",\n              children: [\"Rated: \", task.rating, \" \\u2605\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 53\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this)\n    }, task._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: handleCloseModal,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Rate Your Experience\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"How was your experience with \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: selectedTask === null || selectedTask === void 0 ? void 0 : (_selectedTask$errande = selectedTask.errander) === null || _selectedTask$errande === void 0 ? void 0 : _selectedTask$errande.firstName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 53\n          }, this), \"?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(StarRating, {\n          rating: rating,\n          setRating: setRating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          as: \"textarea\",\n          rows: 3,\n          placeholder: \"Optional feedback...\",\n          value: feedback,\n          onChange: e => setFeedback(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleCloseModal,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleRatingSubmit,\n          children: \"Submit Rating\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\n_s(UserDashboard, \"daJLuZK8fe8FvhopMmPKludDOKU=\", false, function () {\n  return [useNavigate];\n});\n_c2 = UserDashboard;\nexport default UserDashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"StarRating\");\n$RefreshReg$(_c2, \"UserDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","Link","useNavigate","Button","Container","Spinner","Alert","Card","Modal","Form","taskService","AuthContext","jsxDEV","_jsxDEV","StarRating","rating","setRating","className","children","Array","map","_","i","type","style","background","border","fontSize","padding","boxShadow","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","UserDashboard","_s","_selectedTask$errande","token","navigate","tasks","setTasks","loading","setLoading","error","setError","showModal","setShowModal","selectedTask","setSelectedTask","feedback","setFeedback","fetchTasks","res","getUserTasks","data","e","handleCheckout","task","_id","handleShowRatingModal","handleCloseModal","handleRatingSubmit","rateTask","alert","handleCancelTask","taskId","window","confirm","cancelTask","t","err","to","variant","size","length","Body","Title","slice","Subtitle","errander","firstName","lastName","Text","status","replace","show","onHide","centered","Header","closeButton","Control","as","rows","placeholder","value","onChange","target","Footer","_c2","$RefreshReg$"],"sources":["C:/Users/user/Desktop/Errand/frontend/src/pages/UserDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Button, Container, Spinner, Alert, Card, Modal, Form } from 'react-bootstrap';\r\nimport taskService from '../services/taskService';\r\nimport AuthContext from '../context/AuthContext';\r\n\r\nconst StarRating = ({ rating, setRating }) => ( <div className=\"my-3 text-center\">{[...Array(5)].map((_, i) => <button type=\"button\" key={i} className={i < rating ? \"btn text-warning\" : \"btn text-secondary\"} style={{ background: 'none', border: 'none', fontSize: '2.5rem', padding: '0 5px', boxShadow: 'none' }} onClick={() => setRating(i + 1)}>★</button>)}</div> );\r\n\r\nconst UserDashboard = () => {\r\n    const { token } = useContext(AuthContext);\r\n    const navigate = useNavigate();\r\n    const [tasks, setTasks] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [selectedTask, setSelectedTask] = useState(null);\r\n    const [rating, setRating] = useState(0);\r\n    const [feedback, setFeedback] = useState('');\r\n\r\n    const fetchTasks = useCallback(async () => { \r\n        if (!token) return; \r\n        try { \r\n            const res = await taskService.getUserTasks(token); \r\n            setTasks(res.data); \r\n        } catch (e) { \r\n            setError(\"Failed to fetch task history.\");\r\n        } finally { \r\n            setLoading(false); \r\n        }}, [token]);\r\n\r\n    useEffect(() => { fetchTasks(); }, [fetchTasks]);\r\n    \r\n    const handleCheckout = (task) => navigate(`/checkout/${task._id}`);\r\n    const handleShowRatingModal = (task) => { setSelectedTask(task); setShowModal(true); };\r\n    const handleCloseModal = () => { setShowModal(false); setRating(0); setFeedback(''); setSelectedTask(null); };\r\n    const handleRatingSubmit = async () => { if (rating === 0) return; try { await taskService.rateTask(selectedTask._id, { rating, feedback }, token); fetchTasks(); handleCloseModal(); } catch (e) { alert('Failed to submit rating.'); }};\r\n\r\n    // --- NEW FUNCTION TO HANDLE CANCELLATION ---\r\n    const handleCancelTask = async (taskId) => {\r\n        if (window.confirm('Are you sure you want to cancel this pending task?')) {\r\n            try {\r\n                const res = await taskService.cancelTask(taskId, token);\r\n                // Update the task in the list to show it's cancelled\r\n                setTasks(tasks.map(t => t._id === taskId ? res.data.task : t));\r\n            } catch (err) {\r\n                alert('Failed to cancel the task. It may have already been accepted.');\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) return <Container className=\"text-center mt-5\"><Spinner /></Container>;\r\n\r\n    return (\r\n        <Container className=\"py-4\">\r\n            <div className=\"text-center mb-5\"><h1 className=\"display-5 fw-bold\">Your Dashboard</h1><p className=\"lead text-muted\">Book a new service or review your past errands.</p><Link to=\"/services\"><Button variant=\"primary\" size=\"lg\" style={{background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', border: 'none'}}>Book a New Service</Button></Link></div>\r\n            <h3 className=\"mb-3\">Your Task History</h3>\r\n            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            {tasks.length === 0 && !error ? <Alert variant=\"light\">You have no tasks yet.</Alert> : tasks.map(task => (\r\n                <Card key={task._id} className=\"mb-3 shadow-sm\">\r\n                    <Card.Body>\r\n                        <div className=\"d-flex justify-content-between align-items-center flex-wrap\">\r\n                            <div>\r\n                                <Card.Title>Task ID: ...{task._id.slice(-6)}</Card.Title>\r\n                                <Card.Subtitle className=\"mb-2 text-muted\">Errander: {task.errander ? `${task.errander.firstName} ${task.errander.lastName}` : 'Not Assigned'}</Card.Subtitle>\r\n                                <Card.Text><strong>Status:</strong> <span className=\"text-capitalize fw-bold\">{task.status.replace('_', ' ')}</span></Card.Text>\r\n                            </div>\r\n                            <div className=\"mt-2 mt-md-0\">\r\n                                {/* --- NEW CONDITIONAL BUTTON --- */}\r\n                                {task.status === 'pending' && (\r\n                                    <Button variant=\"outline-danger\" size=\"sm\" onClick={() => handleCancelTask(task._id)}>Cancel Task</Button>\r\n                                )}\r\n                                {task.status === 'completed' && <Button variant=\"success\" onClick={() => handleCheckout(task)}>Proceed to Checkout</Button>}\r\n                                {task.status === 'paid' && !task.rating && <Button variant=\"warning\" onClick={() => handleShowRatingModal(task)}>Rate Task</Button>}\r\n                                {task.rating > 0 && <span className=\"text-warning fw-bold\">Rated: {task.rating} ★</span>}\r\n                            </div>\r\n                        </div>\r\n                    </Card.Body>\r\n                </Card>\r\n            ))}\r\n            <Modal show={showModal} onHide={handleCloseModal} centered>\r\n                <Modal.Header closeButton><Modal.Title>Rate Your Experience</Modal.Title></Modal.Header>\r\n                <Modal.Body className=\"text-center\">\r\n                    <p>How was your experience with <strong>{selectedTask?.errander?.firstName}</strong>?</p>\r\n                    <StarRating rating={rating} setRating={setRating} />\r\n                    <Form.Control as=\"textarea\" rows={3} placeholder=\"Optional feedback...\" value={feedback} onChange={(e) => setFeedback(e.target.value)} />\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleCloseModal}>Cancel</Button>\r\n                    <Button variant=\"primary\" onClick={handleRatingSubmit}>Submit Rating</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </Container>\r\n    );\r\n};\r\nexport default UserDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}